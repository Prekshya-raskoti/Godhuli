{% extends "base.html" %}
{% load static %}
{% block content %}

<!-- About Section -->
<section id="about" class="about section">
  <div class="container section-title" data-aos="fade-up">
    <h2>{{ about.heading }}</h2>
    <div><span>Learn More</span> <span class="description-title">{{ about.title }}</span></div>
  </div>

  <div class="container">
    <div class="row gx-5 align-items-center">
      <div class="col-lg-6" data-aos="fade-right" data-aos-delay="200">
        <div class="about-image position-relative">
          <img src="{{ about.image.url }}" class="img-fluid rounded-4 shadow-sm" alt="About Image" loading="lazy">
          <div class="experience-badge">
            <span class="years">{{ about.years_of_expertise }}</span>
            <span class="text">{{ about.expertise_text }}</span>
          </div>
        </div>
      </div>

      <div class="col-lg-6 mt-4 mt-lg-0" data-aos="fade-left" data-aos-delay="300">
        <div class="about-content">
          <h2>{{ about.title }}</h2>
          <p class="lead">{{ about.description }}</p>

          <div class="row g-4 mt-3">
            {% for feature in about.features.all %}
            <div class="col-md-6" data-aos="zoom-in" data-aos-delay="400">
              <div class="feature-item">
                <i class="bi {{ feature.icon }}"></i>
                <h5>{{ feature.title }}</h5>
                <p>{{ feature.description }}</p>
              </div>
            </div>
            {% endfor %}
          </div>

          <a href="#" class="btn btn-primary mt-4">Explore Our Services</a>
        </div>
      </div>
    </div>

    <!-- Testimonials -->
    <div class="testimonial-section mt-5 pt-5" data-aos="fade-up" data-aos-delay="100">
      <div class="row">
        <div class="col-lg-4" data-aos="fade-right" data-aos-delay="200">
          <div class="testimonial-intro">
            <h3>Our Clients Speak Highly</h3>
            <p>Hear directly from those who have experienced the impact of our partnership and achieved their strategic goals.</p>
            <div class="swiper-nav-buttons mt-4">
              <button class="slider-prev"><i class="bi bi-arrow-left"></i></button>
              <button class="slider-next"><i class="bi bi-arrow-right"></i></button>
            </div>
          </div>
        </div>

        <div class="col-lg-8" data-aos="fade-left" data-aos-delay="300">
          {% if testimonials %}
          <div class="testimonial-slider swiper init-swiper">
            <script type="application/json" class="swiper-config">
              {
                "loop": {{ show_testimonial_loop|yesno:"true,false" }},
                "speed": 800,
                "autoplay": { "delay": 5000 },
                "slidesPerView": 1,
                "spaceBetween": 30,
                "navigation": {
                  "nextEl": ".slider-next",
                  "prevEl": ".slider-prev"
                },
                "breakpoints": {
                  "768": { "slidesPerView": 2 }
                }
              }
            </script>
            <div class="swiper-wrapper">
              {% for testimonial in testimonials %}
              <div class="swiper-slide">
                <div class="testimonial-item">
                  <div class="rating mb-3">
                    {% for i in "12345" %}
                      {% if testimonial.rating|floatformat:1 >= i %}
                        <i class="bi bi-star-fill"></i>
                      {% elif testimonial.rating|floatformat:1 >= i|add:'-0.5' %}
                        <i class="bi bi-star-half"></i>
                      {% else %}
                        <i class="bi bi-star"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <p>"{{ testimonial.quote }}"</p>
                  <div class="client-info d-flex align-items-center mt-4">
                    <img src="{{ testimonial.photo.url }}" class="client-img" alt="Client" loading="lazy">
                    <div>
                      <h6 class="mb-0">{{ testimonial.name }}</h6>
                      <span>{{ testimonial.position }}</span>
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% else %}
          <div class="alert alert-info mt-4">
            Testimonials are being added. Please check back soon!
          </div>
          {% endif %}
        </div>
      </div>
    </div>

  </div>
</section>
<!-- /About Section -->

{% endblock content %}
